<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHA!! Super Legit To!</title>
    <style>
        :root {
            --bg: #0a0a0f;
            --card-bg: #12121a;
            --text: #ffffff;
            --neon-purple: #bc13fe;
            --neon-blue: #00f2fe;
            --neon-green: #39ff14;
            --neon-pink: #ff0055;
            --border: rgba(255, 255, 255, 0.1);
        }

        [data-theme="light"] {
            --bg: #f0f2f5;
            --card-bg: #ffffff;
            --text: #1a202c;
            --border: rgba(0, 0, 0, 0.1);
            --neon-purple: #8b5cf6;
            --neon-blue: #3b82f6;
        }

        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Rajdhani', sans-serif; margin: 0; 
            transition: background 0.3s, color 0.3s; overflow-x: hidden;
        }

        .glass { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; backdrop-filter: blur(10px); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .neon-text { text-shadow: 0 0 10px var(--neon-purple); color: var(--neon-purple); }

        /* --- Theme Toggle (Right Corner Below) --- */
        .theme-switch { position: fixed; bottom: 20px; right: 20px; z-index: 100; cursor: pointer; padding: 10px; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 20px; }

        /* --- Auth Styling --- */
        #auth-screen { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 9999; }
        .auth-card { width: 340px; padding: 30px; text-align: center; border: 1px solid var(--neon-purple); }
        .input-group { text-align: left; margin-bottom: 15px; }
        .input-group label { font-size: 12px; color: var(--neon-blue); display: block; margin-bottom: 5px; }
        .auth-input { width: 100%; padding: 12px; background: rgba(128,128,128,0.1); border: 1px solid var(--border); color: var(--text); border-radius: 6px; box-sizing: border-box; }
        .error-txt { color: var(--neon-pink); font-size: 12px; margin-top: 8px; font-weight: bold; }

        /* --- Navigation --- */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; border-bottom: 1px solid var(--border); background: var(--card-bg); }
        .nav-links { display: flex; gap: 20px; }
        .nav-links button { background: none; border: none; color: var(--text); font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .active-tab { color: var(--neon-blue) !important; border-bottom: 2px solid var(--neon-blue); }

        /* --- Mission Terminal --- */
        .mission-category-btn { padding: 8px 15px; font-size: 12px; background: none; border: 1px solid var(--border); color: var(--text); cursor: pointer; border-radius: 4px; }
        .mission-category-btn.active { background: var(--neon-blue); color: white; border-color: var(--neon-blue); }
        .locked-mission { opacity: 0.4; filter: grayscale(1); pointer-events: none; position: relative; }
        .locked-mission::after { content: "LOCKED"; position: absolute; right: 20px; color: var(--neon-pink); font-weight: bold; }

        /* --- Ranks Styling --- */
        .rank-card { padding: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid var(--border); transition: 0.3s; }
        .rank-card.owned { border-left-color: var(--neon-green); background: rgba(57, 255, 20, 0.05); }

        /* --- History Filters --- */
        .hist-filters { display: flex; gap: 5px; margin-bottom: 10px; overflow-x: auto; }
        .filter-btn { padding: 4px 10px; font-size: 10px; background: rgba(128,128,128,0.1); border: 1px solid var(--border); color: var(--text); cursor: pointer; border-radius: 4px; }
        .filter-btn.active { border-color: var(--neon-blue); color: var(--neon-blue); }

        .container { max-width: 800px; margin: 30px auto; padding: 0 20px; }
        .btn { padding: 10px 20px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-purple { background: var(--neon-purple); color: white; }
        .btn-blue { background: none; border: 1px solid var(--neon-blue); color: var(--neon-blue); }
        
        #success-toast { position: fixed; bottom: 30px; right: -400px; width: 300px; padding: 20px; border-left: 5px solid var(--neon-green); z-index: 10000; transition: 0.5s ease; }
        #success-toast.show { right: 30px; }
        .hidden { display: none !important; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>

<div class="theme-switch glass" onclick="toggleTheme()">ðŸŒ“</div>

<div id="auth-screen">
    <div class="auth-card glass">
        <h1 class="neon-text">AHA!!</h1>
        <p style="font-size: 12px; margin-bottom: 20px;">Super Legit To!</p>
        <div id="auth-box">
            <h3 id="auth-title">SYSTEM REGISTER</h3>
            <div class="input-group"><label>OPERATOR NAME</label><input type="text" id="auth-user" class="auth-input"></div>
            <div class="input-group"><label>ENCRYPTION KEY</label><input type="password" id="auth-pass" class="auth-input"><div id="auth-error" class="error-txt"></div></div>
            <button class="btn btn-purple" style="width:100%" onclick="handleAuthAction()">INITIALIZE</button>
            <p style="font-size:12px; cursor:pointer; color:var(--neon-blue); margin-top:15px;" onclick="toggleAuthMode()" id="auth-toggle">Have account? Login</p>
        </div>
    </div>
</div>

<div id="main-ui" class="hidden">
    <nav>
        <div class="brand neon-text" style="font-size:18px; font-weight:bold;">AHA Legit!</div>
        <div class="nav-links">
            <button onclick="switchTab('dash')" id="t-dash" class="active-tab">Status</button>
            <button onclick="switchTab('tasks')" id="t-tasks">Missions</button>
            <button onclick="switchTab('profile')" id="t-profile">Operator</button>
        </div>
    </nav>

    <div class="container">
        <div id="view-dash">
            <div id="mission-monitor" class="glass hidden" style="margin-bottom:20px; padding:20px; border: 1px solid var(--neon-green);">
                <div style="display:flex; justify-content:space-between;"><span id="mon-name">...</span><span id="mon-time">0s</span></div>
                <div style="height:6px; background:rgba(255,255,255,0.1); margin-top:10px; border-radius:3px; overflow:hidden;"><div id="mon-bar" style="height:100%; width:0%; background:var(--neon-green); transition:0.1s linear;"></div></div>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-bottom:20px;">
                <div class="glass" style="padding:15px;"><small>GRID BALANCE</small><h2 id="ui-bal" class="neon-text">$0.00</h2></div>
                <div class="glass" style="padding:15px;"><small>CURRENT RANK</small><h2 id="ui-rank" style="color:var(--neon-blue);">BASIC</h2></div>
            </div>

            <div class="glass" style="padding:20px; border-left:4px solid var(--neon-blue); margin-bottom:20px;">
                <h3 style="margin:0 0 10px 0;">LEGITIMACY PROTOCOL</h3>
                <button class="btn btn-blue" style="font-size:10px;" onclick="document.getElementById('legit-info').classList.toggle('hidden')">Expand Transparency Report</button>
                <p id="legit-info" class="hidden" style="font-size:13px; opacity:0.8; margin-top:10px; line-height:1.6; text-align:justify;">
                    The AHA!! Super Legit To! infrastructure operates on a decentralized Proof-of-Task (PoT) consensus mechanism. To maintain the highest level of trust, all user assets are stored in cold-storage multi-signature vaults, isolated from operational hot wallets to prevent unauthorized access. Our proprietary 'Super-Legit-Node' network utilizes end-to-end AES-256 encryption for all data transmissions, providing a tamper-proof environment for both deposits and extractions. As of the Q1 2026 fiscal audit, our liquidity pools maintain a 1:1 reserve ratio, fully collateralized to guarantee instant withdrawal processing regardless of market volatility. We adhere to a strict transparency policy; our smart contracts are publicly verifiable, and our compliance framework is updated monthly to meet the highest standards of global digital asset security.
                </p>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <div class="glass" style="padding:15px; text-align:center;"><h3>DEPOSIT</h3><input type="number" id="dep-amt" class="auth-input" placeholder="0.00"><button class="btn btn-blue" style="width:100%; margin-top:10px;" onclick="processFin('Deposit')">STAKE</button></div>
                <div class="glass" style="padding:15px; text-align:center;"><h3>WITHDRAW</h3><input type="number" id="wit-amt" class="auth-input" placeholder="0.00"><button class="btn btn-purple" style="width:100%; margin-top:10px;" onclick="processFin('Withdraw')">EXTRACT</button></div>
            </div>
        </div>

        <div id="view-tasks" class="hidden">
            <div style="display:flex; gap:10px; margin-bottom:20px; overflow-x:auto; padding-bottom:5px;">
                <button class="mission-category-btn active" onclick="renderMissions('BASIC', this)">BASIC</button>
                <button class="mission-category-btn" onclick="renderMissions('BRONZE', this)">BRONZE</button>
                <button class="mission-category-btn" onclick="renderMissions('SILVER', this)">SILVER</button>
                <button class="mission-category-btn" onclick="renderMissions('GOLD', this)">GOLD</button>
                <button class="mission-category-btn" onclick="renderMissions('PLATINUM', this)">PLATINUM</button>
            </div>
            <div id="mission-grid"></div>
        </div>

        <div id="view-profile" class="hidden">
            <div class="glass" style="padding:25px;">
                <h2 class="neon-text" style="text-align:center;">RANK UPGRADES</h2>
                <div id="rank-list"></div>
                
                <h3 class="neon-text" style="margin-top:30px; border-top:1px solid var(--border); padding-top:20px;">HISTORY</h3>
                <div class="hist-filters">
                    <button class="filter-btn active" onclick="filterHistory('ALL', this)">ALL</button>
                    <button class="filter-btn" onclick="filterHistory('TASK', this)">TASKS</button>
                    <button class="filter-btn" onclick="filterHistory('DEPOSIT', this)">DEPOSITS</button>
                    <button class="filter-btn" onclick="filterHistory('WITHDRAW', this)">WITHDRAWS</button>
                </div>
                <div id="history-list" class="glass" style="max-height:200px; overflow-y:auto; font-size:13px; padding:10px;"></div>

                <button class="btn btn-blue" style="border-color:var(--neon-pink); color:var(--neon-pink); margin-top:20px; width:100%;" onclick="location.reload()">TERMINATE SESSION</button>
            </div>
        </div>
    </div>
</div>

<div id="success-toast" class="glass"><h4 id="toast-title" style="margin:0;"></h4><p id="toast-body" style="margin:5px 0 0 0; font-size:12px;"></p></div>

<script>
    let db = JSON.parse(localStorage.getItem('aha_db')) || [];
    let state = { user: null, balance: 0, rank: "BASIC", history: [], theme: 'dark' };
    let currentHistoryFilter = 'ALL';

    const rankData = [
        { name: "BASIC", price: 0, level: 0 },
        { name: "BRONZE", price: 500, level: 1 },
        { name: "SILVER", price: 2000, level: 2 },
        { name: "GOLD", price: 5000, level: 3 },
        { name: "PLATINUM", price: 15000, level: 4 }
    ];

    let missionData = [
        { id: 1, tier: "BASIC", name: "Watch Promo", reward: 10, time: 5 },
        { id: 2, tier: "BASIC", name: "Data Entry", reward: 25, time: 10 },
        { id: 3, tier: "BRONZE", name: "Secure Node", reward: 150, time: 15 },
        { id: 4, tier: "SILVER", name: "Deep Scan", reward: 600, time: 30 },
        { id: 5, tier: "GOLD", name: "Bank Bypass", reward: 1800, time: 45 },
        { id: 6, tier: "PLATINUM", name: "Quantum Breach", reward: 5000, time: 60 }
    ];

    function toggleTheme() {
        state.theme = state.theme === 'dark' ? 'light' : 'dark';
        document.body.setAttribute('data-theme', state.theme);
    }

    function toggleAuthMode() {
        const t = document.getElementById('auth-title');
        t.innerText = t.innerText.includes('REGISTER') ? "SYSTEM LOGIN" : "SYSTEM REGISTER";
        document.getElementById('auth-toggle').innerText = t.innerText.includes('LOGIN') ? "Need account? Signup" : "Have account? Login";
    }

    function handleAuthAction() {
        const u = document.getElementById('auth-user').value.trim();
        const p = document.getElementById('auth-pass').value.trim();
        if(u.length < 2) {
            return showToast("ERROR", "Operator Name too short", "var(--neon-pink)");
        }

        let acc = db.find(x => x.user === u);
        if(document.getElementById('auth-title').innerText.includes('REGISTER')) {
            if(acc) return showToast("ERROR", "User already exists", "var(--neon-pink)");
            acc = { user: u, pass: p, balance: 0, rank: "BASIC", history: [] };
            db.push(acc);
            saveDb();
            showToast("SUCCESS", "Operator Registered");
        } else {
            if(!acc || acc.pass !== p) return showToast("ACCESS DENIED", "Invalid Credentials", "var(--neon-pink)");
            showToast("ACCESS GRANTED", "Welcome back, Operator.");
        }
        state = acc;
        login();
    }

    function login() {
        document.getElementById('auth-screen').classList.add('hidden');
        document.getElementById('main-ui').classList.remove('hidden');
        updateUI();
        renderRanks();
        renderMissions("BASIC");
    }

    function renderMissions(tier, btn) {
        if(btn) {
            document.querySelectorAll('.mission-category-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        const grid = document.getElementById('mission-grid');
        const userLevel = rankData.find(r => r.name === state.rank).level;
        const tierLevel = rankData.find(r => r.name === tier).level;
        
        const filtered = missionData.filter(m => m.tier === tier);
        grid.innerHTML = filtered.map(m => `
            <div class="glass ${tierLevel > userLevel ? 'locked-mission' : ''}" style="padding:15px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center;">
                <div><strong>${m.name}</strong><br><small>$${m.reward} | ${m.time}s</small></div>
                <button class="btn btn-purple" onclick="startTask(${m.id})" ${tierLevel > userLevel ? 'disabled' : ''}>Start</button>
            </div>
        `).join('');
    }

    function renderRanks() {
        const list = document.getElementById('rank-list');
        const userLevel = rankData.find(r => r.name === state.rank).level;
        list.innerHTML = rankData.map(r => {
            let buttonHtml = '';
            if (state.rank === r.name) {
                buttonHtml = '<span>ACTIVE</span>';
            } else if (r.level < userLevel) {
                buttonHtml = '<span style="opacity:0.5; font-size:10px;">PREVIOUS</span>';
            } else {
                buttonHtml = `<button class="btn btn-blue" onclick="buyRank('${r.name}')">UPGRADE</button>`;
            }

            return `
                <div class="glass rank-card ${state.rank === r.name ? 'owned' : ''}">
                    <div><strong>${r.name}</strong><br><small>${r.price === 0 ? 'FREE' : '$'+r.price}</small></div>
                    ${buttonHtml}
                </div>
            `;
        }).join('');
    }

    function buyRank(name) {
        const r = rankData.find(x => x.name === name);
        if(state.balance < r.price) return showToast("ERROR", "Insufficient Funds", "var(--neon-pink)");
        state.balance -= r.price;
        state.rank = name;
        state.history.unshift({ type: "UPGRADE", name: name, amount: r.price });
        updateUI();
        renderRanks();
        showToast("RANK UPGRADED", `Welcome to ${name} tier.`);
        saveDb();
    }

    function startTask(id) {
        const m = missionData.find(x => x.id === id);
        const mon = document.getElementById('mission-monitor');
        mon.classList.remove('hidden');
        document.getElementById('mon-name').innerText = m.name;
        switchTab('dash');

        let cur = 0;
        const iv = setInterval(() => {
            cur += 100;
            document.getElementById('mon-bar').style.width = (cur / (m.time*1000) * 100) + '%';
            document.getElementById('mon-time').innerText = Math.ceil((m.time*1000 - cur)/1000) + 's';
            if(cur >= m.time*1000) {
                clearInterval(iv);
                state.balance += m.reward;
                state.history.unshift({ type: "TASK", name: m.name, amount: m.reward });
                mon.classList.add('hidden');
                updateUI();
                showToast("SUCCESS", `Earned $${m.reward}`);
                saveDb();
            }
        }, 100);
    }

    function processFin(type) {
        const val = parseFloat(document.getElementById(type === 'Deposit' ? 'dep-amt' : 'wit-amt').value);
        if(!val || val <= 0) return showToast("ERROR", "Invalid Amount", "var(--neon-pink)");
        if(type === 'Withdraw' && val > state.balance) return showToast("ERROR", "Insufficient Balance", "var(--neon-pink)");
        state.balance += (type === 'Deposit' ? val : -val);
        state.history.unshift({ type: type.toUpperCase(), name: "Funds", amount: val });
        updateUI();
        saveDb();
        showToast(type.toUpperCase(), `Processed $${val}`);
    }

    function filterHistory(type, btn) {
        currentHistoryFilter = type;
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        updateHistoryUI();
    }

    function updateHistoryUI() {
        const hist = document.getElementById('history-list');
        const filtered = currentHistoryFilter === 'ALL' 
            ? state.history 
            : state.history.filter(h => h.type === currentHistoryFilter);

        hist.innerHTML = filtered.map(h => `<div>[${h.type}] ${h.name}: $${h.amount}</div>`).join('') || "No records.";
    }

    function updateUI() {
        document.getElementById('ui-bal').innerText = `$${state.balance.toFixed(2)}`;
        document.getElementById('ui-rank').innerText = state.rank;
        updateHistoryUI();
    }

    function switchTab(t) {
        ['dash', 'tasks', 'profile'].forEach(id => {
            document.getElementById('view-'+id).classList.add('hidden');
            document.getElementById('t-'+id).classList.remove('active-tab');
        });
        document.getElementById('view-'+t).classList.remove('hidden');
        document.getElementById('t-'+t).classList.add('active-tab');
    }

    function showToast(t, b, c = "var(--neon-green)") {
        const toast = document.getElementById('success-toast');
        toast.style.borderLeftColor = c;
        document.getElementById('toast-title').innerText = t;
        document.getElementById('toast-title').style.color = c;
        document.getElementById('toast-body').innerText = b;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 3000);
    }

    function saveDb() {
        const idx = db.findIndex(x => x.user === state.user);
        if(idx !== -1) {
            db[idx] = state;
            localStorage.setItem('aha_db', JSON.stringify(db));
        }
    }
</script>
</body>
</html>